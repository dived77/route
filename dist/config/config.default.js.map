{"version":3,"sources":["../../config/config.default.js"],"names":["path","require","module","exports","config","name","description","site_logo","site_icon","debug","keys","appInfo","host","session_secret","middleware","authUser","allow_sign_up","site_static_host","process","env","EGG_SITE_STATIC_HOST","mini_assets","EGG_MINI_ASSETS","tabs","rss","qn_access","upload","join","__dirname","view","ejs","avatars_allow_hostname","auth_cookie_name","admins","siteFile","redis","EGG_REDIS_HOST","EGG_REDIS_PORT","EGG_REDIS_PASSWORD","EGG_REDIS_DB","mongoose","EGG_MONGODB_URL","passportGithub","EGG_PASSPORT_GITHUB_CLIENT_ID","EGG_PASSPORT_GITHUB_CLIENT_SECRET","passportLocal","mail_opts","alinode","EGG_ALINODE_APPID","EGG_ALINODE_SECRET","topic","list_topic_count","create_user_per_ip","search","mysql"],"mappings":"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","file":"config.default.js","sourcesContent":["'use strict';\nconst path = require('path');\n\nmodule.exports = appInfo => {\n    const config = {};\n\n    config.name = 'CNode技术社区';\n\n    config.description = 'CNode：Node.js专业中文社区';\n\n    config.site_logo = '/public/images/cnodejs_light.svg';\n\n    config.site_icon = '/public/images/cnode_icon_32.png';\n\n    // debug 为 true 时，用于本地调试\n    config.debug = true;\n\n    // use for cookie sign key, should change to your own and keep security\n    config.keys = appInfo.name + '_1519887194138_3450';\n\n    config.host = 'http://cnodejs.org';\n\n    config.session_secret = 'node_club_secret'; // 务必修改\n\n    // add your config here\n    config.middleware = ['locals', 'authUser', 'blockUser', 'errorPage'];\n\n    config.authUser = {\n        'enable': true,\n        'match': '/',\n    };\n\n    // 是否允许直接注册（否则只能走 github 的方式）\n    config.allow_sign_up = true;\n\n    // cdn host，如 http://cnodejs.qiniudn.com\n    config.site_static_host = process.env.EGG_SITE_STATIC_HOST || ''; // 静态文件存储域名\n\n    config.mini_assets = process.env.EGG_MINI_ASSETS || false;\n\n    // 版块\n    config.tabs = [['share', '分享'], ['ask', '问答'], ['job', '招聘']];\n\n    // RSS配置\n    config.rss = {\n        'title': 'CNode：Node.js专业中文社区',\n        'link': 'http://cnodejs.org',\n        'language': 'zh-cn',\n        'description': 'CNode：Node.js专业中文社区',\n        // 最多获取的RSS Item数量\n        'max_rss_items': 50,\n    };\n\n    // 下面两个配置都是文件上传的配置\n\n    // 7牛的access信息，用于文件上传\n    config.qn_access = {\n        'accessKey': 'your access key',\n        'secretKey': 'your secret key',\n        'bucket': 'your bucket name',\n        'origin': 'http://your qiniu domain',\n        // 如果vps在国外，请使用 http://up.qiniug.com/ ，这是七牛的国际节点\n        // 如果在国内，此项请留空\n        'uploadURL': 'http://xxxxxxxx',\n    };\n\n    // 文件上传配置\n    // 注：如果填写 qn_access，则会上传到 7牛，以下配置无效\n    config.upload = {\n        'path': path.join(__dirname, '../app/public/upload/'),\n        'url': '/public/upload/',\n    };\n\n    config.view = {\n        'defaultViewEngine': 'ejs',\n        'mapping': {\n            '.html': 'ejs',\n        },\n    };\n\n    config.ejs = {\n        'layout': 'layout.html',\n    };\n\n    config.avatars_allow_hostname = [\n        'avatars0.githubusercontent.com',\n        'avatars1.githubusercontent.com',\n        'avatars2.githubusercontent.com',\n        'avatars.githubusercontent.com',\n        'www.gravatar.com',\n        'gravatar.com',\n        'www.google-analytics.com',\n    ];\n\n    config.auth_cookie_name = 'node_club';\n    config.admins = {\n        'ADMIN_USER': true,\n    };\n\n    config.siteFile = {\n        '/favicon.ico': '/public/images/cnode_icon_32.png',\n    };\n\n    // database\n    config.redis = {\n        'client': {\n            'host': process.env.EGG_REDIS_HOST || '127.0.0.1',\n            'port': process.env.EGG_REDIS_PORT || 6379,\n            'password': process.env.EGG_REDIS_PASSWORD || '',\n            'db': process.env.EGG_REDIS_DB || '0',\n        },\n    };\n\n    /**\n     * @see http://mongodb.github.io/node-mongodb-native/2.2/api/Db.html#createCollection\n     */\n    config.mongoose = {\n        'url': process.env.EGG_MONGODB_URL || 'mongodb://127.0.0.1:27017/egg_cnode',\n        'options': {\n            'server': {'poolSize': 20},\n        },\n    };\n\n    // passport\n    config.passportGithub = {\n        'key': process.env.EGG_PASSPORT_GITHUB_CLIENT_ID || 'test',\n        'secret': process.env.EGG_PASSPORT_GITHUB_CLIENT_SECRET || 'test',\n    };\n\n    config.passportLocal = {\n        'usernameField': 'name',\n        'passwordField': 'pass',\n    };\n\n    // 邮箱配置\n    config.mail_opts = {\n        'host': 'smtp.126.com',\n        'port': 25,\n        'auth': {\n            'user': 'club@126.com',\n            'pass': 'club',\n        },\n        'ignoreTLS': true,\n    };\n\n    config.alinode = {\n        // 从 `Node.js 性能平台` 获取对应的接入参数\n        'appid': process.env.EGG_ALINODE_APPID || '13173',\n        'secret': process.env.EGG_ALINODE_SECRET || '83cd543a57e7639aa623784a02a37acd5fb00a9f',\n    };\n\n    config.topic = {\n        'perDayPerUserLimitCount': 10,\n    };\n\n    config.list_topic_count = 20;\n\n    // 每个 IP 每天可创建用户数\n    config.create_user_per_ip = 1000;\n\n    config.search = 'google'; // 'google', 'baidu', 'local'\n\n\n    // config/config.${env}.js\n    config.mysql = {\n        // 单数据库信息配置\n        'client': {\n            // host\n            'host': 'mysql.com',\n            // 端口号\n            'port': '3306',\n            // 用户名\n            'user': 'root',\n            // 密码\n            'password': '',\n            // 数据库名\n            'database': 'route',\n        },\n        // 是否加载到 app 上，默认开启\n        'app': true,\n        // 是否加载到 agent 上，默认关闭\n        'agent': false,\n    };\n\n    return config;\n};\n"]}